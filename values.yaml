global:
  namespace: nilabja-haldar-dev
  platform: kubernetes
  expose:
    type: ingress
    domain: example.com
    tlsEnabled: false

prometheus:
  image: prom/prometheus:v2.49.1
  retention: 24h

alertmanager:
  image: prom/alertmanager:v0.26.0
  slack:
    enabled: false
    # Replace with your real Slack incoming webhook URL:
    webhookUrl: "https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXXXXXX"
    channel: "#alerts"
    username: "alertmanager"
    icon_emoji: ":rotating_light:"

loki:
  image: grafana/loki:2.9.4

grafana:
  image: grafana/grafana:10.3.1
  adminUser: admin
  adminPassword: admin

sampleSites:
  siteA:
    host: site-a.example.com
    title: "Sample A"
    message: "Welcome to Sample A static website!"
  siteB:
    host: site-b.example.com
    title: "Sample B"
    message: "Welcome to Sample B static website!"

nginxExporter:
  image: nginx/nginx-prometheus-exporter:1.5.1
  # Defaults per upstream: listens on :9113, scrapes /stub_status on 8080
  scrapeUri: "http://127.0.0.1:8080/stub_status"
  port: 9113


database:
  enabled: true
  image: bitnami/postgresql:latest    # official Postgres image
  port: 5432
  env:
    POSTGRES_DB: appdb
    POSTGRES_USER: appuser
    POSTGRES_PASSWORD: appsecret
  storage:
    enabled: true              # set false to use emptyDir (no PVC)
    size: 10Gi
    storageClassName: ""       # optional: set to your SC, e.g., "standard"

  exporter:
    enabled: true
    image: quay.io/prometheuscommunity/postgres-exporter:v0.12.0
    port: 9187
    # The exporter sidecar reads credentials from the same Secret.
    # It connects to Postgres via localhost inside the pod (5432).
    datasource:
      uri: "127.0.0.1:5432/appdb?sslmode=disable"
      userRef: "postgres-user"       # keys inside the Secret (see template)
      passRef: "postgres-password"

storage:
  className: efs-sc           # <-- use your default SC (ebs.csi.aws.com)
  alertmanager:
    size: 2Gi
  loki:
    size: 10Gi
  siteA:
    cacheSize: 1Gi
  siteB:
    cacheSize: 1Gi
  database:
    size: 10Gi
